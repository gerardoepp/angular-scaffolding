var app = angular.module('myApp', ['ngRoute', 'ngAnimate']);


app.config(['$routeProvider',
  function ($routeProvider) {
        $routeProvider.when('/home', {
            title: 'Home',
            templateUrl: 'partials/home.html',
            controller: 'homeCtrl'
        })

		    .otherwise({
		        redirectTo: '/home'
		    });
  }])
.run(function ($rootScope, $location, Data,  $templateCache) {
    /*$rootScope.$on("$routeChangeStart", function (event, next, current)
    {
       $rootScope.authenticated = false;
       Data.get('session/alive').then(function (results) {
           if (results.success)
           {
                sessionStorage.setItem('licenseAuthenticated','true');
                sessionStorage.setItem('usuario',results.email);
           }
           else
           {
               var nextUrl = next.$$route.originalPath;
               if (nextUrl == '/regsup' || nextUrl == '/lo' || nextUrl == '/ci')
               {
                    sessionStorage.setItem('licenseAuthenticated','false');
               }
               else
               {
                   sessionStorage.setItem('licenseAuthenticated','false');
                   $location.path("/lo");
               }
           }
       });
    });*/
});

app.config(function ($httpProvider)
{
    $httpProvider.interceptors.push('AuthInterceptor');
});

app.config(['$httpProvider', function ($httpProvider)
{
  $httpProvider.defaults.headers.common = {};
  $httpProvider.defaults.headers.post = {'Content-Type' : 'application/json'};
  $httpProvider.defaults.headers.put = {'Content-Type' : 'application/json'};
  $httpProvider.defaults.headers.patch = {};
}]);
